/*
 * THIS FILE WAS GENERATED BY "@atproto/lex". DO NOT EDIT.
 */
// @ts-nocheck

import { l } from '@atproto/lex'
import * as RepoStrongRef from '../../../com/atproto/repo/strongRef.defs.js'

const $nsid = 'org.rwell.test.interaction'

export { $nsid }

/** Species interaction documenting ecological relationship between organisms. */
type Main = {
  $type: 'org.rwell.test.interaction'

  /**
   * The first subject (actor) in the interaction.
   */
  subjectA: InteractionSubject

  /**
   * The second subject (recipient) in the interaction.
   */
  subjectB: InteractionSubject

  /**
   * Type of ecological interaction between the subjects.
   */
  interactionType:
    | 'predation'
    | 'pollination'
    | 'parasitism'
    | 'herbivory'
    | 'symbiosis'
    | 'mutualism'
    | 'competition'
    | 'shelter'
    | 'transportation'
    | 'oviposition'
    | 'seed_dispersal'
    | l.UnknownString

  /**
   * Direction of the interaction: AtoB means A acts on B, BtoA means B acts on A, bidirectional means mutual.
   */
  direction: 'AtoB' | 'BtoA' | 'bidirectional'

  /**
   * Confidence level in the interaction observation.
   */
  confidence?: 'low' | 'medium' | 'high'

  /**
   * Additional notes about the interaction.
   */
  comment?: string

  /**
   * Timestamp when this record was created.
   */
  createdAt: l.DatetimeString
}

export type { Main }

/** Species interaction documenting ecological relationship between organisms. */
const main = l.record<'tid', Main>(
  'tid',
  $nsid,
  l.object({
    subjectA: l.ref<InteractionSubject>((() => interactionSubject) as any),
    subjectB: l.ref<InteractionSubject>((() => interactionSubject) as any),
    interactionType: l.string({ maxLength: 64 }),
    direction: l.withDefault(l.enum(['AtoB', 'BtoA', 'bidirectional']), 'AtoB'),
    confidence: l.optional(
      l.withDefault(l.enum(['low', 'medium', 'high']), 'medium'),
    ),
    comment: l.optional(l.string({ maxLength: 3000 })),
    createdAt: l.string({ format: 'datetime' }),
  }),
)

export { main }

export const $isTypeOf = /*#__PURE__*/ main.isTypeOf.bind(main),
  $build = /*#__PURE__*/ main.build.bind(main),
  $type = /*#__PURE__*/ main.$type
export const $assert = /*#__PURE__*/ main.assert.bind(main),
  $check = /*#__PURE__*/ main.check.bind(main),
  $cast = /*#__PURE__*/ main.cast.bind(main),
  $ifMatches = /*#__PURE__*/ main.ifMatches.bind(main),
  $matches = /*#__PURE__*/ main.matches.bind(main),
  $parse = /*#__PURE__*/ main.parse.bind(main),
  $safeParse = /*#__PURE__*/ main.safeParse.bind(main),
  $validate = /*#__PURE__*/ main.validate.bind(main),
  $safeValidate = /*#__PURE__*/ main.safeValidate.bind(main)

/** A subject in an interaction - can reference an existing occurrence or just specify a taxon name. */
type InteractionSubject = {
  $type?: 'org.rwell.test.interaction#interactionSubject'

  /**
   * Reference to an existing occurrence record.
   */
  occurrence?: RepoStrongRef.Main

  /**
   * Index of the subject within the occurrence (for multi-subject observations).
   */
  subjectIndex?: number

  /**
   * Scientific name of the organism (for unobserved subjects or to override occurrence ID).
   */
  taxonName?: string

  /**
   * Taxonomic kingdom to disambiguate homonyms.
   */
  kingdom?: string
}

export type { InteractionSubject }

/** A subject in an interaction - can reference an existing occurrence or just specify a taxon name. */
const interactionSubject = l.typedObject<InteractionSubject>(
  $nsid,
  'interactionSubject',
  l.object({
    occurrence: l.optional(
      l.ref<RepoStrongRef.Main>((() => RepoStrongRef.main) as any),
    ),
    subjectIndex: l.optional(
      l.withDefault(l.integer({ minimum: 0, maximum: 99 }), 0),
    ),
    taxonName: l.optional(l.string({ maxLength: 256 })),
    kingdom: l.optional(l.string({ maxLength: 64 })),
  }),
)

export { interactionSubject }
