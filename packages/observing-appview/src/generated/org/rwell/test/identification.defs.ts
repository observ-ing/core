/*
 * THIS FILE WAS GENERATED BY "@atproto/lex". DO NOT EDIT.
 */
// @ts-nocheck

import { l } from '@atproto/lex'
import * as RepoStrongRef from '../../../com/atproto/repo/strongRef.defs.js'

const $nsid = 'org.rwell.test.identification'

export { $nsid }

/** An identification suggestion for an existing observation. Used to propose or agree with a taxonomic identification. */
type Main = {
  $type: 'org.rwell.test.identification'

  /**
   * A strong reference (CID + URI) to the observation being identified.
   */
  subject: RepoStrongRef.Main

  /**
   * Index of the subject within the occurrence being identified. When multiple organisms are photographed together (e.g., butterfly on a flower), each gets a unique index starting from 0. Creating an identification with a new subjectIndex implicitly creates that subject.
   */
  subjectIndex?: number

  /**
   * The scientific name being proposed for the observation.
   */
  taxonName: string

  /**
   * The taxonomic rank of the identification (e.g., species, genus, family).
   */
  taxonRank?:
    | 'kingdom'
    | 'phylum'
    | 'class'
    | 'order'
    | 'family'
    | 'genus'
    | 'species'
    | 'subspecies'
    | 'variety'
    | 'form'
    | l.UnknownString

  /**
   * [
   *
   * @deprecated Use kingdom + scientificName for taxon resolution] External taxon identifier (e.g., gbif:2878688). Prefixed with source.
   */
  taxonId?: string

  /**
   * Common name for the taxon in the identifier's language.
   */
  vernacularName?: string

  /**
   * Taxonomic kingdom (e.g., Animalia, Plantae).
   */
  kingdom?: string

  /**
   * Taxonomic phylum.
   */
  phylum?: string

  /**
   * Taxonomic class.
   */
  class?: string

  /**
   * Taxonomic order.
   */
  order?: string

  /**
   * Taxonomic family.
   */
  family?: string

  /**
   * Taxonomic genus.
   */
  genus?: string

  /**
   * Explanation or reasoning for this identification.
   */
  comment?: string

  /**
   * If true, this identification agrees with the current community ID rather than proposing a new one.
   */
  isAgreement?: boolean

  /**
   * The identifier's confidence level in this identification.
   */
  confidence?: 'low' | 'medium' | 'high'

  /**
   * Timestamp when this identification was created.
   */
  createdAt: l.DatetimeString
}

export type { Main }

/** An identification suggestion for an existing observation. Used to propose or agree with a taxonomic identification. */
const main = l.record<'tid', Main>(
  'tid',
  $nsid,
  l.object({
    subject: l.ref<RepoStrongRef.Main>((() => RepoStrongRef.main) as any),
    subjectIndex: l.optional(
      l.withDefault(l.integer({ minimum: 0, maximum: 99 }), 0),
    ),
    taxonName: l.string({ maxLength: 256 }),
    taxonRank: l.optional(
      l.withDefault(l.string({ maxLength: 32 }), 'species'),
    ),
    taxonId: l.optional(l.string({ maxLength: 64 })),
    vernacularName: l.optional(l.string({ maxLength: 256 })),
    kingdom: l.optional(l.string({ maxLength: 64 })),
    phylum: l.optional(l.string({ maxLength: 64 })),
    class: l.optional(l.string({ maxLength: 64 })),
    order: l.optional(l.string({ maxLength: 64 })),
    family: l.optional(l.string({ maxLength: 64 })),
    genus: l.optional(l.string({ maxLength: 64 })),
    comment: l.optional(l.string({ maxLength: 3000 })),
    isAgreement: l.optional(l.withDefault(l.boolean(), false)),
    confidence: l.optional(
      l.withDefault(l.enum(['low', 'medium', 'high']), 'medium'),
    ),
    createdAt: l.string({ format: 'datetime' }),
  }),
)

export { main }

export const $isTypeOf = /*#__PURE__*/ main.isTypeOf.bind(main),
  $build = /*#__PURE__*/ main.build.bind(main),
  $type = /*#__PURE__*/ main.$type
export const $assert = /*#__PURE__*/ main.assert.bind(main),
  $check = /*#__PURE__*/ main.check.bind(main),
  $cast = /*#__PURE__*/ main.cast.bind(main),
  $ifMatches = /*#__PURE__*/ main.ifMatches.bind(main),
  $matches = /*#__PURE__*/ main.matches.bind(main),
  $parse = /*#__PURE__*/ main.parse.bind(main),
  $safeParse = /*#__PURE__*/ main.safeParse.bind(main),
  $validate = /*#__PURE__*/ main.validate.bind(main),
  $safeValidate = /*#__PURE__*/ main.safeValidate.bind(main)
