{
  "lexicon": 1,
  "id": "org.rwell.test.identification",
  "defs": {
    "main": {
      "type": "record",
      "description": "An identification suggestion for an existing observation. Used to propose or agree with a taxonomic identification.",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["subject", "taxon", "createdAt"],
        "properties": {
          "subject": {
            "type": "ref",
            "ref": "com.atproto.repo.strongRef",
            "description": "A strong reference (CID + URI) to the observation being identified."
          },
          "subjectIndex": {
            "type": "integer",
            "description": "Index of the subject within the occurrence being identified. When multiple organisms are photographed together (e.g., butterfly on a flower), each gets a unique index starting from 0. Creating an identification with a new subjectIndex implicitly creates that subject.",
            "minimum": 0,
            "maximum": 99,
            "default": 0
          },
          "taxon": {
            "type": "ref",
            "ref": "#taxon",
            "description": "The taxonomic determination being proposed (Darwin Core Taxon class)."
          },
          "taxonId": {
            "type": "string",
            "description": "[DEPRECATED: Use kingdom + scientificName for taxon resolution] External taxon identifier (e.g., gbif:2878688). Prefixed with source.",
            "maxLength": 64
          },
          "comment": {
            "type": "string",
            "description": "Explanation or reasoning for this identification (Darwin Core dwc:identificationRemarks).",
            "maxLength": 3000
          },
          "isAgreement": {
            "type": "boolean",
            "description": "If true, this identification agrees with the current community ID rather than proposing a new one.",
            "default": false
          },
          "confidence": {
            "type": "string",
            "description": "The identifier's confidence level in this identification.",
            "enum": ["low", "medium", "high"],
            "default": "medium"
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "Timestamp when this identification was created (Darwin Core dwc:dateIdentified)."
          }
        }
      }
    },
    "taxon": {
      "type": "object",
      "description": "Taxonomic information following Darwin Core Taxon class (dwc:Taxon).",
      "required": ["scientificName"],
      "properties": {
        "scientificName": {
          "type": "string",
          "description": "The full scientific name (Darwin Core dwc:scientificName).",
          "maxLength": 256
        },
        "scientificNameAuthorship": {
          "type": "string",
          "description": "The authorship information for the scientificName (Darwin Core dwc:scientificNameAuthorship).",
          "maxLength": 256
        },
        "taxonRank": {
          "type": "string",
          "description": "The taxonomic rank of the identification (Darwin Core dwc:taxonRank).",
          "knownValues": ["kingdom", "phylum", "class", "order", "family", "genus", "species", "subspecies", "variety", "form"],
          "default": "species",
          "maxLength": 32
        },
        "vernacularName": {
          "type": "string",
          "description": "Common name for the taxon in the identifier's language (Darwin Core dwc:vernacularName).",
          "maxLength": 256
        },
        "kingdom": {
          "type": "string",
          "description": "Taxonomic kingdom (Darwin Core dwc:kingdom).",
          "maxLength": 64
        },
        "phylum": {
          "type": "string",
          "description": "Taxonomic phylum (Darwin Core dwc:phylum).",
          "maxLength": 64
        },
        "class": {
          "type": "string",
          "description": "Taxonomic class (Darwin Core dwc:class).",
          "maxLength": 64
        },
        "order": {
          "type": "string",
          "description": "Taxonomic order (Darwin Core dwc:order).",
          "maxLength": 64
        },
        "family": {
          "type": "string",
          "description": "Taxonomic family (Darwin Core dwc:family).",
          "maxLength": 64
        },
        "genus": {
          "type": "string",
          "description": "Taxonomic genus (Darwin Core dwc:genus).",
          "maxLength": 64
        }
      }
    }
  }
}
