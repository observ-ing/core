{
  "lexicon": 1,
  "id": "org.rwell.test.occurrence",
  "defs": {
    "main": {
      "type": "record",
      "description": "A biodiversity observation record following Darwin Core standards. Represents a single occurrence of an organism at a specific place and time.",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["scientificName", "eventDate", "location", "createdAt"],
        "properties": {
          "scientificName": {
            "type": "string",
            "description": "The full scientific name of the observed organism, following Darwin Core dwc:scientificName.",
            "maxLength": 256
          },
          "eventDate": {
            "type": "string",
            "format": "datetime",
            "description": "The date-time when the observation occurred, in ISO 8601 format (Darwin Core dwc:eventDate)."
          },
          "location": {
            "type": "ref",
            "ref": "#location",
            "description": "Geographic location information for the observation."
          },
          "verbatimLocality": {
            "type": "string",
            "description": "The original textual description of the place (Darwin Core dwc:verbatimLocality).",
            "maxLength": 1024
          },
          "blobs": {
            "type": "array",
            "description": "Array of image references documenting the observation.",
            "items": {
              "type": "ref",
              "ref": "#imageEmbed"
            },
            "maxLength": 10
          },
          "notes": {
            "type": "string",
            "description": "Additional notes or comments about the observation.",
            "maxLength": 3000
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "Timestamp when this record was created."
          }
        }
      }
    },
    "location": {
      "type": "object",
      "description": "Geographic coordinates following Darwin Core standards.",
      "required": ["decimalLatitude", "decimalLongitude"],
      "properties": {
        "decimalLatitude": {
          "type": "number",
          "description": "The geographic latitude in decimal degrees (Darwin Core dwc:decimalLatitude). Valid range: -90 to 90.",
          "minimum": -90,
          "maximum": 90
        },
        "decimalLongitude": {
          "type": "number",
          "description": "The geographic longitude in decimal degrees (Darwin Core dwc:decimalLongitude). Valid range: -180 to 180.",
          "minimum": -180,
          "maximum": 180
        },
        "coordinateUncertaintyInMeters": {
          "type": "integer",
          "description": "The horizontal distance (in meters) from the given coordinates describing the smallest circle containing the whole of the Location (Darwin Core dwc:coordinateUncertaintyInMeters).",
          "minimum": 0
        },
        "geodeticDatum": {
          "type": "string",
          "description": "The ellipsoid, geodetic datum, or spatial reference system used (Darwin Core dwc:geodeticDatum). Defaults to WGS84.",
          "default": "WGS84",
          "maxLength": 64
        }
      }
    },
    "imageEmbed": {
      "type": "object",
      "description": "A reference to an uploaded image blob.",
      "required": ["image", "alt"],
      "properties": {
        "image": {
          "type": "blob",
          "accept": ["image/jpeg", "image/png", "image/webp"],
          "maxSize": 10000000,
          "description": "The image blob reference."
        },
        "alt": {
          "type": "string",
          "description": "Alt text description of the image for accessibility.",
          "maxLength": 1000
        },
        "aspectRatio": {
          "type": "ref",
          "ref": "#aspectRatio"
        }
      }
    },
    "aspectRatio": {
      "type": "object",
      "description": "Width and height of an image, used for proper display before loading.",
      "required": ["width", "height"],
      "properties": {
        "width": {
          "type": "integer",
          "minimum": 1
        },
        "height": {
          "type": "integer",
          "minimum": 1
        }
      }
    }
  }
}
